
require 'rake/testtask'

TestModules = %w[
  Logger
  Core
  PCP
  HTTP
  UI.HTTP
]

Configurations = %w[
  Debug
  Release
]

Configurations.each do |config|
  TestModules.each do |name|
    Rake::TestTask.new("test:#{name}:#{config}") do |t|
      t.libs << "PeerCastStation.#{name}/bin/#{config}"
      t.libs << "Test#{name}"
      (t.pattern ||=[]) << "Test#{name}/test_*.rb"
      t.verbose = true
    end
  end
  task "test:#{config}" => TestModules.collect {|name| "test:#{name}:#{config}" }
end

task :test => 'test:Debug'

