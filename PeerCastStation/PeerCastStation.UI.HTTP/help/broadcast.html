<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta name="robots" content="noindex,nofollow">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>配信</title>

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootswatch@5.3.3/dist/cerulean/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css" integrity="sha256-9kPW/n5nn53j4WMRYAxe9c1rCY96Oogo/MKSVdKzPmI=" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.7.1/dist/jquery.min.js" integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo=" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/knockout@3.5.1/build/output/knockout-latest.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js" integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.min.js" integrity="sha256-3gQJhtmj7YnV1fmtbVcnAV6eI4ws0Tr48bVZCThtCGQ=" crossorigin="anonymous"></script>
    <style type="text/css">img { max-width:100%; }</style>
  </head>
  <body data-bs-spy="scroll" data-bs-target="#nav-contents" data-bs-smooth-scroll="true">
    <div id="header" class="mb-2">
      <nav class="navbar navbar-expand-sm bg-body-tertiary shadow-sm">
        <div class="container-fluid">
          <a class="navbar-brand" href="/html/index.html"><i class="d-none d-sm-inline d-md-none bi bi-info-square"></i><span class="d-inline d-sm-none d-md-inline">PeerCastStation</span></a>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
          </button>
          <div class="collapse navbar-collapse" id="navbarNav">
            <ul class="navbar-nav me-auto">
              <li class="nav-item me-lg-2"><a class="nav-link" href="/html/channels.html"><i class="bi bi-book"></i> Yellow Page</a></li>
              <li class="nav-item me-lg-2"><a class="nav-link" href="/html/relays.html"><i class="bi bi-collection-play"></i> チャンネル</a></li>
              <li class="nav-item me-lg-2"><a class="nav-link" href="/html/settings.html"><i class="bi bi-gear"></i> 設定</a></li>
              <li class="nav-item me-lg-2"><a class="nav-link" href="/html/logs.html"><i class="bi bi-journal-text"></i> ログ</a></li>
              <li class="nav-item me-lg-2"><a class="nav-link active" href="/help/index.html"><i class="bi bi-question-square"></i> ヘルプ</a></li>
            </ul>
          </div>
        </div>
      </nav>
    </div>

    <div id="nav-offcanvas" class="offcanvas offcanvas-start">
      <div class="offcanvas-header">
        <h5 class="offcanvas-title">目次</h5>
        <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"></button>
      </div>
      <div class="offcanvas-body">
    <nav class="nav nav-pills flex-column">

      <h5 class="nav-header">PeerCastStationについて</h5>



      <a class="nav-link " href="/help/">PeerCastStationについて</a>



      <h5 class="nav-header">使い方</h5>



      <a class="nav-link " href="/help/usage.html">使い方</a>




      <a class="nav-link " href="/help/ypbrowser.html">YPブラウザの使い方</a>



      <h5 class="nav-header">設定</h5>



      <a class="nav-link " href="/help/settings.html">設定</a>



      <h5 class="nav-header">配信</h5>



      <a class="nav-link active" data-bs-toggle="collapse" href="#nav-contents2" role="button" aria-expanded="true">配信</a>
      <div id="nav-contents2" class="list-group collapse show">
        <a class='list-group-item list-group-item-action' href='#配信'>配信</a>
<a class='list-group-item list-group-item-action' href='#配信方法---gui編'>配信方法 - GUI編</a>
<a class='list-group-item list-group-item-action' href='#http配信'>HTTP配信</a>
<a class='list-group-item list-group-item-action' href='#rtmp配信'>RTMP配信</a>
<a class='list-group-item list-group-item-action' href='#配信開始後'>配信開始後</a>
<a class='list-group-item list-group-item-action' href='#配信方法---html-ui編'>配信方法 - HTML UI編</a>
      </div>



      <h5 class="nav-header">その他</h5>



      <a class="nav-link " href="/help/misc.html">その他</a>



    </nav>
      </div>
    </div>

    <div class="container-fluid">
      <div class="row">
        <div class="col-3 d-none d-sm-block">
          <nav class="nav nav-pills flex-column sticky-top">

            <h5 class="nav-header">PeerCastStationについて</h5>



            <a class="nav-link " href="/help/">PeerCastStationについて</a>



            <h5 class="nav-header">使い方</h5>



            <a class="nav-link " href="/help/usage.html">使い方</a>




            <a class="nav-link " href="/help/ypbrowser.html">YPブラウザの使い方</a>



            <h5 class="nav-header">設定</h5>



            <a class="nav-link " href="/help/settings.html">設定</a>



            <h5 class="nav-header">配信</h5>



            <a class="nav-link active" data-bs-toggle="collapse" href="#nav-contents" role="button" aria-expanded="true">配信</a>
            <div id="nav-contents" class="list-group collapse show">
              <a class='list-group-item list-group-item-action' href='#配信'>配信</a>
<a class='list-group-item list-group-item-action' href='#配信方法---gui編'>配信方法 - GUI編</a>
<a class='list-group-item list-group-item-action' href='#http配信'>HTTP配信</a>
<a class='list-group-item list-group-item-action' href='#rtmp配信'>RTMP配信</a>
<a class='list-group-item list-group-item-action' href='#配信開始後'>配信開始後</a>
<a class='list-group-item list-group-item-action' href='#配信方法---html-ui編'>配信方法 - HTML UI編</a>
            </div>



            <h5 class="nav-header">その他</h5>



            <a class="nav-link " href="/help/misc.html">その他</a>



          </nav>
        </div>
        <div class="col">
          <div class="row d-flex d-sm-none sticky-top">
            <button class="col-auto ms-auto btn btn-secondary" type="button" data-bs-toggle="offcanvas" data-bs-target="#nav-offcanvas"><i class="bi bi-bookmarks"></i> 目次</button>
          </div>
          <h1 id="配信">配信</h1>

<h2 id="配信方法---gui編">配信方法 - GUI編</h2>
<p>配信してYPに掲載するにはまずYPの設定を追加しましょう。YPの追加は<a href="settings.html">設定のヘルプ</a>を参照してください。</p>

<p>配信するにはGUIのチャンネル一覧隣の配信…ボタンを押します。またはメニューからチャンネル(C)→配信(B)…を選択します。</p>

<h3 id="http配信">HTTP配信</h3>
<p>ここではHTTP配信(Windows Media EncoderやExpression Encoderからの配信)について説明します。RTMP配信については下の方を見てください。</p>

<p><img src="images/gui_broadcast.png" alt="配信開始ウィンドウ" /></p>

<table class="table">
  <tbody>
    <tr>
      <td>履歴</td>
      <td>以前に配信開始した時の設定の一覧です。いずれかを選択すると呼び出すことができます。通常は最大20件まで保存されますが、リストを表示した状態で右のハートマークをクリックするとお気に入り設定になり、20件とは別にずっと保存されるようになります。</td>
    </tr>
    <tr>
      <td>ソース</td>
      <td>配信する動画の取得方法を指定します。HTTP配信の場合はHTTPを選択します。</td>
    </tr>
    <tr>
      <td>ストリームURL</td>
      <td>配信する動画のURLを指定します。エンコーダによって指定された値(http://localhost:8080/など)を入れておきます。</td>
    </tr>
    <tr>
      <td>ビットレート</td>
      <td>通常は動画から取得される自動を選択しておけば大丈夫です。数値を指定すると(kbps単位で)動画の公称ビットレートと別な値を指定することができます。</td>
    </tr>
    <tr>
      <td>タイプ</td>
      <td>ストリームURLで取得する動画のタイプを指定します。RAWは通常使用しないので、エンコーダに合わせて適切な物を選択してください。</td>
    </tr>
    <tr>
      <td>掲載YP</td>
      <td>掲載先のYPを指定します。どのYPにも載せない場合は掲載無しを選択してください。載せたいYPがリストに無い場合は設定で追加してください。</td>
    </tr>
    <tr>
      <td>チャンネル名</td>
      <td>チャンネル名を指定します。他のチャンネル情報は記入しなくても配信開始できますが、チャンネル名は必ず入力する必要があります。</td>
    </tr>
    <tr>
      <td>ジャンル</td>
      <td>チャンネルのジャンルを指定します。YPによってはここに適切な文字列を入れないと載らない場合があります。YPごとの掲載方法を参照してください。</td>
    </tr>
  </tbody>
</table>

<p>チャンネル情報・トラック情報のうち、チャンネル名以外は配信中の変更が可能です。</p>

<p>HTTP配信の場合は、配信開始前に指定したURLでエンコーダがエンコードを開始している必要があります。</p>

<p>適切な値を入力したら配信開始ボタンを押してください。チャンネル一覧に配信開始したチャンネルが追加されます。
配信開始ができない場合はストリームURLが正しいか、チャンネル名が入力されているかを確認してください。</p>

<p>エンコーダからの動画取得ができていればチャンネルの状態がRECEIVINGになります。
それ以外の場合はエンコードが開始されていないかURLが間違っている可能性があるので確認してください。</p>

<h3 id="rtmp配信">RTMP配信</h3>
<p>ここではRTMP配信(Open Broadcaster SoftwareやFlash Playerからの配信)について説明します。HTTP配信については上の説明を見てください</p>

<p><img src="images/gui_broadcast_rtmp.png" alt="配信開始ウィンドウ(RTMP配信編)" /></p>

<table class="table">
  <tbody>
    <tr>
      <td>履歴</td>
      <td>以前に配信開始した時の設定の一覧です。いずれかを選択すると呼び出すことができます。通常は最大20件まで保存されますが、リストを表示した状態で右のハートマークをクリックするとお気に入り設定になり、20件とは別にずっと保存されるようになります。</td>
    </tr>
    <tr>
      <td>ソース</td>
      <td>配信する動画の取得方法を指定します。RTMP配信をする場合はRTMP Sourceを選択してください。</td>
    </tr>
    <tr>
      <td>ストリームURL</td>
      <td>エンコーダが接続するURLを指定します。ホスト名とポート番号(指定がなければ1935)を指定してください。それ以降の/live/livestreamのところは現状、何を設定しても見ていないのでそのままにしておきます。基本的には最初から入っている値(rtmp://localhost/live/livestream)のままで問題ありません。</td>
    </tr>
    <tr>
      <td>ビットレート</td>
      <td>通常は動画から取得される自動を選択しておけば大丈夫です。数値を指定すると(kbps単位で)動画の公称ビットレートと別な値を指定することができます。</td>
    </tr>
    <tr>
      <td>タイプ</td>
      <td>RTMPの場合は何を選択してもFLVになります。気になる場合はFLVを選択しておいてください。</td>
    </tr>
    <tr>
      <td>掲載YP</td>
      <td>掲載先のYPを指定します。どのYPにも載せない場合は掲載無しを選択してください。載せたいYPがリストに無い場合は設定で追加してください。</td>
    </tr>
    <tr>
      <td>チャンネル名</td>
      <td>チャンネル名を指定します。他のチャンネル情報は記入しなくても配信開始できますが、チャンネル名は必ず入力する必要があります。</td>
    </tr>
    <tr>
      <td>ジャンル</td>
      <td>チャンネルのジャンルを指定します。YPによってはここに適切な文字列を入れないと載らない場合があります。YPごとの掲載方法を参照してください。</td>
    </tr>
  </tbody>
</table>

<p>チャンネル情報・トラック情報のうち、チャンネル名以外は配信中の変更が可能です。</p>

<p>RTMP配信の場合は、PeerCastStationでの配信開始をしてからエンコーダでのエンコードを開始します。</p>

<p>適切な値を入力したら配信開始ボタンを押してください。チャンネル一覧に配信開始したチャンネルが追加されます。
配信開始ができない場合はストリームURLが正しいか、チャンネル名が入力されているかを確認してください。</p>

<p>配信開始をするとチャンネルの状態がSEARCHINGになります。この状態になったらエンコーダの配信先URLに指定したURL(rtmp://localhost/live/livestream)を入力してエンコードを開始してください。上手くいけばチャンネル状態がRECEIVINGになって配信が始まります。</p>

<h3 id="配信開始後">配信開始後</h3>
<p>配信開始後は通常のリレーと同じく切断などが行えます。</p>

<p>チャンネル情報は通常のリレーと違って編集することができます。編集したあとに一番下の更新ボタンを押してください。</p>

<p><img src="images/gui_channelinfo.png" alt="チャンネル情報" /></p>

<p>接続一覧では接続している先とリレー接続してきたクライアントの情報を見ることができます。</p>

<p><img src="images/gui_connectionlist.png" alt="接続一覧" /></p>

<table class="table">
  <tbody>
    <tr>
      <td>HTTPまたはRTMP * Source</td>
      <td>ストリームURLへの接続状態をあらわします。接続されている場合は受信ビットレートが表示されます。</td>
    </tr>
    <tr>
      <td>COUT</td>
      <td>YPへの接続状態をあらわします。掲載していない場合は表示されません。</td>
    </tr>
    <tr>
      <td>PCP Relay</td>
      <td>リレー接続をあらわします。チャンネル一覧と同じく接続先に状態が記号で表示されます。また、正常に接続されている場合は送信ビットレートが表示されます。</td>
    </tr>
    <tr>
      <td>HTTP Direct</td>
      <td>直接の視聴接続をあらわします。正常に接続されている場合は送信ビットレートが表示されます。</td>
    </tr>
  </tbody>
</table>

<p>COUTへの接続を選択すると右のボタンで再接続が行えます。通常は接続が切れた場合は自動的に再接続されるので手動で押す必要はありません。</p>

<p>HTTP DirectやPCP Relayの接続を選択すると右のボタンで切断することができます。</p>

<h2 id="配信方法---html-ui編">配信方法 - HTML UI編</h2>
<p>配信してYPに掲載するにはまずYPの設定を追加しましょう。YPの追加は<a href="settings.html">設定のヘルプ</a>を参照してください。</p>

<p>配信するにはチャンネル一覧ページ右上の配信ボタンを押します。</p>

<p><img src="images/htmlui_channellist.png" alt="チャンネル一覧" /></p>

<p><img src="images/htmlui_broadcast.png" alt="配信開始ウィンドウ" /></p>

<table class="table">
  <tbody>
    <tr>
      <td>配信設定履歴</td>
      <td>以前に配信開始した時の設定の一覧です。いずれかを選択すると呼び出すことができます。通常は最大20件まで保存されますが、リストを表示した状態で右のハートマークをクリックするとお気に入り設定になり、20件とは別にずっと保存されるようになります。</td>
    </tr>
    <tr>
      <td>ストリームURL</td>
      <td>配信する動画のURLを指定します。http://localhost:8080/など入れておきます。</td>
    </tr>
    <tr>
      <td>ソース</td>
      <td>配信する動画の取得方法を指定します。HTTP配信とRTMP配信についてはGUI編を見てください。</td>
    </tr>
    <tr>
      <td>ビットレート</td>
      <td>通常は動画から取得されるので指定する必要はありません。数値を指定すると(kbps単位で)動画の公称ビットレートと別な値を指定することができます。</td>
    </tr>
    <tr>
      <td>タイプ</td>
      <td>ストリームURLで取得する動画のタイプを指定します。RAWは通常使用しないので、適切な物を選択してください。</td>
    </tr>
    <tr>
      <td>掲載YP</td>
      <td>掲載先のYPを指定します。どのYPにも載せない場合は掲載無しを選択してください。載せたいYPがリストに無い場合は設定で追加してください。</td>
    </tr>
    <tr>
      <td>チャンネル名</td>
      <td>チャンネル名を指定します。他のチャンネル情報は記入しなくても配信開始できますが、チャンネル名は必ず入力する必要があります。</td>
    </tr>
    <tr>
      <td>ジャンル</td>
      <td>チャンネルのジャンルを指定します。YPによってはここに適切な文字列を入れないと載らない場合があります。YPごとの掲載方法を参照してください。</td>
    </tr>
  </tbody>
</table>

<p>チャンネル情報・トラック情報のうち、チャンネル名以外は配信中の変更が可能です。</p>

<p>適切な値を入力したら配信開始ボタンを押してください。チャンネル一覧に配信開始したチャンネルが追加されます。チャンネルが追加されない場合はストリームURLが正しいか、チャンネル名が入力されているかを確認してください。</p>

<p>配信開始後は通常のリレーと同じく切断などが行えます。</p>

<p>チャンネル情報は通常のリレーと違って編集することができます。チャンネル情報を表示させて一番下の編集ボタンを押してください。</p>

<p><img src="images/htmlui_channelinfo.png" alt="チャンネル情報" /></p>

<p>接続一覧では接続している先とリレー接続してきたクライアントの情報を見ることができます。</p>

<p><img src="images/htmlui_connectionlist.png" alt="接続一覧" /></p>

<table class="table">
  <tbody>
    <tr>
      <td>Source</td>
      <td>ストリームURLへの接続状態をあらわします。接続されている場合は受信ビットレートが表示されます。</td>
    </tr>
    <tr>
      <td>Announce</td>
      <td>YPへの接続状態をあらわします。掲載していない場合は表示されません。</td>
    </tr>
    <tr>
      <td>Relay</td>
      <td>リレー接続をあらわします。GUIのチャンネル一覧と同じく接続先に状態が記号で表示されます。また、正常に接続されている場合は送信ビットレートが表示されます。</td>
    </tr>
    <tr>
      <td>Direct</td>
      <td>直接の視聴接続をあらわします。正常に接続されている場合は送信ビットレートが表示されます。</td>
    </tr>
  </tbody>
</table>

<p>各接続の左のボタンで切断・再接続が行えます。ただし、再接続はAnnounceのみ、切断はRelayとDirectのみで有効です。それ以外の接続に対して実行しても何も起きません。</p>


        </div>
      </div>
    </div>
  </body>
</html>
